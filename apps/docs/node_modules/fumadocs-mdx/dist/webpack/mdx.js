import {
  createMdxLoader
} from "../chunk-2E2JCOSO.js";
import {
  createStandaloneConfigLoader,
  toWebpack
} from "../chunk-ETIN2W7C.js";
import "../chunk-3J3WL7WN.js";
import "../chunk-K5ZLPEIQ.js";
import "../chunk-VUEZTR2H.js";
import {
  createCore
} from "../chunk-2AQRQXSO.js";
import "../chunk-VWJKRQZR.js";

// src/webpack/mdx.ts
var instance;
async function loader(source, callback) {
  const { isDev, outDir, configPath } = this.getOptions();
  this.cacheable(true);
  this.addDependency(configPath);
  if (!instance) {
    const core = createCore({
      environment: "webpack",
      outDir,
      configPath
    });
    instance = toWebpack(
      createMdxLoader(
        createStandaloneConfigLoader({
          core,
          buildConfig: false,
          mode: isDev ? "dev" : "production"
        })
      )
    );
  }
  await instance.call(this, source, callback);
}
export {
  loader as default
};
