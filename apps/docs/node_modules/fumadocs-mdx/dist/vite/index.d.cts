import { Plugin } from 'vite';

interface IndexFileOptions {
    /**
     * Runtime compat fallbacks for Vite specific APIs
     *
     * - `bun`: use Bun-specific APIs.
     * - `node`: use Node.js APIs.
     * - `false` (default): no fallback.
     */
    runtime?: 'bun' | 'node' | false;
    /**
     * add `.js` extensions to imports, needed for ESM without bundler resolution
     */
    addJsExtension?: boolean;
    /**
     * Generate entry point for browser environment
     */
    browser?: boolean;
}

interface PluginOptions {
    /**
     * Automatically generate index files for accessing files with `import.meta.glob`.
     *
     * @defaultValue true
     */
    generateIndexFile?: boolean | IndexFileOptions;
    /**
     * @defaultValue source.config.ts
     */
    configPath?: string;
    /**
     * Update Vite config to fix module resolution of Fumadocs
     *
     * @defaultValue true
     */
    updateViteConfig?: boolean;
    /**
     * Output directory of generated files
     *
     * @defaultValue '.source'
     */
    outDir?: string;
}
declare function mdx(config: Record<string, unknown>, pluginOptions?: PluginOptions): Promise<Plugin>;
declare function postInstall(configPath?: string, pluginOptions?: PluginOptions): Promise<void>;

export { type PluginOptions, mdx as default, postInstall };
