// src/utils/git-timestamp.ts
import path from "path";
import { x } from "tinyexec";
var cache = /* @__PURE__ */ new Map();
async function getGitTimestamp(file) {
  const cached = cache.get(file);
  if (cached) return cached;
  try {
    const out = await x(
      "git",
      ["log", "-1", '--pretty="%ai"', path.relative(process.cwd(), file)],
      {
        throwOnError: true
      }
    );
    const time = new Date(out.stdout);
    cache.set(file, time);
    return time;
  } catch {
    return;
  }
}

export {
  getGitTimestamp
};
