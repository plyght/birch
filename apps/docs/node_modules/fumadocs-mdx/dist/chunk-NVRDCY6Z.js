// src/runtime/shared.ts
import fs from "fs/promises";
function createDocMethods(info, load) {
  return {
    info,
    async getText(type) {
      if (type === "raw") {
        return (await fs.readFile(info.fullPath)).toString();
      }
      const data = await load();
      if (typeof data._markdown !== "string")
        throw new Error(
          "getText('processed') requires `includeProcessedMarkdown` to be enabled in your collection config."
        );
      return data._markdown;
    },
    async getMDAST() {
      const data = await load();
      if (!data._mdast)
        throw new Error(
          "getMDAST() requires `includeMDAST` to be enabled in your collection config."
        );
      return JSON.parse(data._mdast);
    }
  };
}

export {
  createDocMethods
};
