import {
  buildConfig
} from "../chunk-2HXTGJBI.js";
import {
  createMdxLoader
} from "../chunk-2E2JCOSO.js";
import {
  createMetaLoader
} from "../chunk-4757L6ST.js";
import {
  createIntegratedConfigLoader,
  toBun
} from "../chunk-ETIN2W7C.js";
import "../chunk-3J3WL7WN.js";
import "../chunk-K5ZLPEIQ.js";
import "../chunk-VUEZTR2H.js";
import {
  createCore,
  findConfigFile
} from "../chunk-2AQRQXSO.js";
import "../chunk-VWJKRQZR.js";

// src/bun/index.ts
import { pathToFileURL } from "url";
function createMdxPlugin(options = {}) {
  const {
    environment = "bun",
    outDir = ".source",
    configPath = findConfigFile(),
    disableMetaFile = false
  } = options;
  return {
    name: "bun-plugin-fumadocs-mdx",
    async setup(build) {
      const importPath = pathToFileURL(configPath).href;
      const core = await createCore({
        environment,
        outDir,
        configPath
      }).init({
        config: buildConfig(await import(importPath))
      });
      const configLoader = createIntegratedConfigLoader(core);
      toBun(createMdxLoader(configLoader))(build);
      if (!disableMetaFile) toBun(createMetaLoader(configLoader))(build);
    }
  };
}
export {
  createMdxPlugin
};
